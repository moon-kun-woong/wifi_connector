2025-07-12 16:53:20,869 - INFO - HTTP Request: GET http://testserver/auth "HTTP/1.1 200 OK"
2025-07-12 16:53:20,872 - DEBUG - Using selector: KqueueSelector
2025-07-12 16:53:20,872 - INFO - Request: POST http://testserver/api/auth/send-code
2025-07-12 16:53:20,872 - INFO - [요청 본문] {"phone_number": "010-4928-4767", "mac_address": "00:11:22:33:44:55"}
2025-07-12 16:53:53,525 - DEBUG - Using selector: KqueueSelector
2025-07-12 16:53:53,525 - INFO - Request: GET http://testserver/
2025-07-12 16:53:53,528 - INFO - Response: 200
2025-07-12 16:53:53,528 - INFO - [응답 본문] <!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi 인증 서비스 - 병원 WiFi 인증</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans KR', sans-serif, Arial;
        }
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f5f5f5;
            color: #333;
            padding: 20px;
        }
        .container {
            width: 100%;
            max-width: 500px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
            text-align: center;
        }
        .hospital-logo {
            width: 80px;
            height: 80px;
            background-color: #3498db;
            color: white;
            border-radius: 50%;
            line-height: 80px;
            font-size: 1.8rem;
            margin: 0 auto 20px;
        }
        h1 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        input[type="text"], input[type="tel"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        .btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s;
            width: 100%;
            margin: 5px 0;
        }
        .btn-secondary {
            background-color: #95a5a6;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        .message {
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .message-success {
            background-color: #d4edda;
            color: #155724;
        }
        .message-error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .timer {
            font-size: 0.9rem;
            color: #777;
            margin-top: 10px;
        }
        footer {
            margin-top: 30px;
            color: #777;
            font-size: 0.8rem;
        }
    </style>
    <script>
        function validatePhone(input) {
            // 숫자와 하이픈만 허용하는 정규식
            let value = input.value.replace(/[^0-9-]/g, '');
            input.value = value;
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="hospital-logo">H</div>
        <h1>WiFi 인증 서비스</h1>
        
        
<div class="message message-success">
    병원 WiFi 인증 서비스에 오신 것을 환영합니다
</div>

<p style="margin-bottom: 30px;">
    병원 무료 WiFi를 이용하시려면 인증 절차가 필요합니다.<br>
    아래 버튼을 눌러 인증 절차를 진행해주세요.
</p>

<a href="/auth" class="btn">WiFi 이용하기</a>

        
        <footer>
            © 2025 병원 WiFi 인증 서비스
        </footer>
    </div>
    
    
    
</body>
</html>
2025-07-12 16:53:53,528 - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-12 16:53:53,529 - DEBUG - Using selector: KqueueSelector
2025-07-12 16:53:53,530 - INFO - Request: GET http://testserver/auth
2025-07-12 16:53:53,531 - INFO - Response: 200
2025-07-12 16:53:53,531 - INFO - [응답 본문] <!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi 인증 - 병원 WiFi 인증</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans KR', sans-serif, Arial;
        }
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f5f5f5;
            color: #333;
            padding: 20px;
        }
        .container {
            width: 100%;
            max-width: 500px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
            text-align: center;
        }
        .hospital-logo {
            width: 80px;
            height: 80px;
            background-color: #3498db;
            color: white;
            border-radius: 50%;
            line-height: 80px;
            font-size: 1.8rem;
            margin: 0 auto 20px;
        }
        h1 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        input[type="text"], input[type="tel"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        .btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s;
            width: 100%;
            margin: 5px 0;
        }
        .btn-secondary {
            background-color: #95a5a6;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        .message {
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .message-success {
            background-color: #d4edda;
            color: #155724;
        }
        .message-error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .timer {
            font-size: 0.9rem;
            color: #777;
            margin-top: 10px;
        }
        footer {
            margin-top: 30px;
            color: #777;
            font-size: 0.8rem;
        }
    </style>
    <script>
        function validatePhone(input) {
            // 숫자와 하이픈만 허용하는 정규식
            let value = input.value.replace(/[^0-9-]/g, '');
            input.value = value;
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="hospital-logo">H</div>
        <h1>WiFi 인증</h1>
        
        
<p style="margin-bottom: 20px;">
    WiFi를 이용하시려면 휴대폰 인증이 필요합니다.<br>
    전화번호를 입력하시면 인증번호가 발송됩니다.
</p>

<form id="phone-form">
    <div class="form-group">
        <label for="phone">전화번호</label>
        <input type="tel" id="phone" name="phone_number" placeholder="010-1234-5678" required 
               oninput="validatePhone(this)" maxlength="13">
    </div>
    
    <div id="error-message" class="message message-error" style="display: none;"></div>
    
    <button type="submit" class="btn">인증번호 받기</button>
    <a href="/" class="btn btn-secondary">취소</a>
</form>

        
        <footer>
            © 2025 병원 WiFi 인증 서비스
        </footer>
    </div>
    
    
<script>
    document.getElementById('phone-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const phone = document.getElementById('phone').value;
        const errorMsg = document.getElementById('error-message');
        
        if (!phone || phone.length < 10) {
            errorMsg.textContent = '올바른 전화번호를 입력해주세요.';
            errorMsg.style.display = 'block';
            return;
        }
        
        try {
            const response = await fetch('/api/auth/send-code', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ phone_number: phone }),
            });
            
            const data = await response.json();
            
            if (response.ok) {
                // 인증번호 확인 페이지로 이동
                window.location.href = `/verify?phone_number=${encodeURIComponent(phone)}`;
            } else {
                errorMsg.textContent = data.detail || '인증번호 발송에 실패했습니다. 다시 시도해주세요.';
                errorMsg.style.display = 'block';
            }
        } catch (error) {
            errorMsg.textContent = '오류가 발생했습니다. 다시 시도해주세요.';
            errorMsg.style.display = 'block';
            console.error('Error:', error);
        }
    });
</script>

</body>
</html>
2025-07-12 16:53:53,531 - INFO - HTTP Request: GET http://testserver/auth "HTTP/1.1 200 OK"
2025-07-12 16:53:53,534 - DEBUG - Using selector: KqueueSelector
2025-07-12 16:53:53,535 - INFO - Request: POST http://testserver/api/auth/send-code
2025-07-12 16:53:53,535 - INFO - [요청 본문] {"phone_number": "010-4928-4767", "mac_address": "00:11:22:33:44:55"}
2025-07-12 16:57:34,948 - DEBUG - Using selector: KqueueSelector
2025-07-12 16:57:34,948 - INFO - Request: GET http://testserver/
2025-07-12 16:57:34,950 - INFO - Response: 200
2025-07-12 16:57:34,950 - INFO - [응답 본문] <!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi 인증 서비스 - 병원 WiFi 인증</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans KR', sans-serif, Arial;
        }
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f5f5f5;
            color: #333;
            padding: 20px;
        }
        .container {
            width: 100%;
            max-width: 500px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
            text-align: center;
        }
        .hospital-logo {
            width: 80px;
            height: 80px;
            background-color: #3498db;
            color: white;
            border-radius: 50%;
            line-height: 80px;
            font-size: 1.8rem;
            margin: 0 auto 20px;
        }
        h1 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        input[type="text"], input[type="tel"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        .btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s;
            width: 100%;
            margin: 5px 0;
        }
        .btn-secondary {
            background-color: #95a5a6;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        .message {
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .message-success {
            background-color: #d4edda;
            color: #155724;
        }
        .message-error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .timer {
            font-size: 0.9rem;
            color: #777;
            margin-top: 10px;
        }
        footer {
            margin-top: 30px;
            color: #777;
            font-size: 0.8rem;
        }
    </style>
    <script>
        function validatePhone(input) {
            // 숫자와 하이픈만 허용하는 정규식
            let value = input.value.replace(/[^0-9-]/g, '');
            input.value = value;
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="hospital-logo">H</div>
        <h1>WiFi 인증 서비스</h1>
        
        
<div class="message message-success">
    병원 WiFi 인증 서비스에 오신 것을 환영합니다
</div>

<p style="margin-bottom: 30px;">
    병원 무료 WiFi를 이용하시려면 인증 절차가 필요합니다.<br>
    아래 버튼을 눌러 인증 절차를 진행해주세요.
</p>

<a href="/auth" class="btn">WiFi 이용하기</a>

        
        <footer>
            © 2025 병원 WiFi 인증 서비스
        </footer>
    </div>
    
    
    
</body>
</html>
2025-07-12 16:57:34,951 - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-12 16:57:34,952 - DEBUG - Using selector: KqueueSelector
2025-07-12 16:57:34,952 - INFO - Request: GET http://testserver/auth
2025-07-12 16:57:34,953 - INFO - Response: 200
2025-07-12 16:57:34,953 - INFO - [응답 본문] <!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi 인증 - 병원 WiFi 인증</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans KR', sans-serif, Arial;
        }
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f5f5f5;
            color: #333;
            padding: 20px;
        }
        .container {
            width: 100%;
            max-width: 500px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
            text-align: center;
        }
        .hospital-logo {
            width: 80px;
            height: 80px;
            background-color: #3498db;
            color: white;
            border-radius: 50%;
            line-height: 80px;
            font-size: 1.8rem;
            margin: 0 auto 20px;
        }
        h1 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        input[type="text"], input[type="tel"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        .btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s;
            width: 100%;
            margin: 5px 0;
        }
        .btn-secondary {
            background-color: #95a5a6;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        .message {
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .message-success {
            background-color: #d4edda;
            color: #155724;
        }
        .message-error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .timer {
            font-size: 0.9rem;
            color: #777;
            margin-top: 10px;
        }
        footer {
            margin-top: 30px;
            color: #777;
            font-size: 0.8rem;
        }
    </style>
    <script>
        function validatePhone(input) {
            // 숫자와 하이픈만 허용하는 정규식
            let value = input.value.replace(/[^0-9-]/g, '');
            input.value = value;
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="hospital-logo">H</div>
        <h1>WiFi 인증</h1>
        
        
<p style="margin-bottom: 20px;">
    WiFi를 이용하시려면 휴대폰 인증이 필요합니다.<br>
    전화번호를 입력하시면 인증번호가 발송됩니다.
</p>

<form id="phone-form">
    <div class="form-group">
        <label for="phone">전화번호</label>
        <input type="tel" id="phone" name="phone_number" placeholder="010-1234-5678" required 
               oninput="validatePhone(this)" maxlength="13">
    </div>
    
    <div id="error-message" class="message message-error" style="display: none;"></div>
    
    <button type="submit" class="btn">인증번호 받기</button>
    <a href="/" class="btn btn-secondary">취소</a>
</form>

        
        <footer>
            © 2025 병원 WiFi 인증 서비스
        </footer>
    </div>
    
    
<script>
    document.getElementById('phone-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const phone = document.getElementById('phone').value;
        const errorMsg = document.getElementById('error-message');
        
        if (!phone || phone.length < 10) {
            errorMsg.textContent = '올바른 전화번호를 입력해주세요.';
            errorMsg.style.display = 'block';
            return;
        }
        
        try {
            const response = await fetch('/api/auth/send-code', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ phone_number: phone }),
            });
            
            const data = await response.json();
            
            if (response.ok) {
                // 인증번호 확인 페이지로 이동
                window.location.href = `/verify?phone_number=${encodeURIComponent(phone)}`;
            } else {
                errorMsg.textContent = data.detail || '인증번호 발송에 실패했습니다. 다시 시도해주세요.';
                errorMsg.style.display = 'block';
            }
        } catch (error) {
            errorMsg.textContent = '오류가 발생했습니다. 다시 시도해주세요.';
            errorMsg.style.display = 'block';
            console.error('Error:', error);
        }
    });
</script>

</body>
</html>
2025-07-12 16:57:34,954 - INFO - HTTP Request: GET http://testserver/auth "HTTP/1.1 200 OK"
2025-07-12 16:57:34,956 - DEBUG - Using selector: KqueueSelector
2025-07-12 16:57:34,957 - INFO - Request: POST http://testserver/api/auth/send-code
2025-07-12 16:57:34,957 - INFO - [요청 본문] {"phone_number": "010-4928-4767", "mac_address": "00:11:22:33:44:55"}
