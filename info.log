2025-07-22 10:53:34,884 - INFO - Request: GET http://localhost:8000/favicon.ico
2025-07-22 10:53:34,997 - INFO - Response: 404
2025-07-22 10:53:35,003 - INFO - [응답 본문] {"detail":"Not Found"}
2025-07-22 10:53:41,228 - INFO - Request: POST http://localhost:8000/api/auth/send-code
2025-07-22 10:53:41,235 - INFO - [요청 본문] {"phone_number":"010-4928-4767"}
2025-07-22 10:53:48,561 - INFO - Request: POST http://localhost:8000/api/auth/send-code
2025-07-22 10:53:48,569 - INFO - [요청 본문] {"phone_number": "010-4928-4767"}
2025-07-22 11:03:46,444 - INFO - Response: 400
2025-07-22 11:03:46,445 - INFO - [응답 본문] {"detail":"There was an error parsing the body"}
2025-07-22 13:01:50,937 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:01:50,939 - INFO - 네트워크 제어 타입: iptables
2025-07-22 13:01:50,949 - INFO - 네트워크 인터페이스: wlan0
2025-07-22 13:01:50,953 - INFO - 캡티브 포털 IP: 192.168.1.1:8000
2025-07-22 13:01:50,961 - INFO - 기본 관리자 계정 확인 완료
2025-07-22 13:02:01,996 - INFO - WiFi 캡티브 포털 서비스 종료
2025-07-22 13:04:15,527 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:04:15,529 - INFO - 네트워크 제어 타입: iptables
2025-07-22 13:04:15,539 - INFO - 네트워크 인터페이스: wlan0
2025-07-22 13:04:15,549 - INFO - 캡티브 포털 IP: 192.168.1.1:8000
2025-07-22 13:04:15,557 - INFO - 기본 관리자 계정 확인 완료
2025-07-22 13:04:20,667 - INFO - Request: GET http://127.0.0.1:8000/
2025-07-22 13:04:20,672 - INFO - Response: 200
2025-07-22 13:04:20,684 - INFO - [응답 본문] <!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi 인증 서비스 - 병원 WiFi 인증</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans KR', sans-serif, Arial;
        }
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f5f5f5;
            color: #333;
            padding: 20px;
        }
        .container {
            width: 100%;
            max-width: 500px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
            text-align: center;
        }
        .hospital-logo {
            width: 80px;
            height: 80px;
            background-color: #3498db;
            color: white;
            border-radius: 50%;
            line-height: 80px;
            font-size: 1.8rem;
            margin: 0 auto 20px;
        }
        h1 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        input[type="text"], input[type="tel"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        .btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s;
            width: 100%;
            margin: 5px 0;
        }
        .btn-secondary {
            background-color: #95a5a6;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        .message {
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .message-success {
            background-color: #d4edda;
            color: #155724;
        }
        .message-error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .timer {
            font-size: 0.9rem;
            color: #777;
            margin-top: 10px;
        }
        footer {
            margin-top: 30px;
            color: #777;
            font-size: 0.8rem;
        }
    </style>
    <script>
        function validatePhone(input) {
            // 숫자와 하이픈만 허용하는 정규식
            let value = input.value.replace(/[^0-9-]/g, '');
            input.value = value;
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="hospital-logo">H</div>
        <h1>WiFi 인증 서비스</h1>
        
        
<div class="message message-success">
    병원 WiFi 인증 서비스에 오신 것을 환영합니다
</div>

<p style="margin-bottom: 30px;">
    병원 무료 WiFi를 이용하시려면 인증 절차가 필요합니다.<br>
    아래 버튼을 눌러 인증 절차를 진행해주세요.
</p>

<a href="/auth" class="btn">WiFi 이용하기</a>

        
        <footer>
            © 2025 병원 WiFi 인증 서비스
        </footer>
    </div>
    
    
    
</body>
</html>
2025-07-22 13:04:29,309 - INFO - Request: GET http://127.0.0.1:8000/auth
2025-07-22 13:04:29,311 - INFO - Response: 200
2025-07-22 13:04:29,331 - INFO - [응답 본문] <!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi 인증 - 병원 WiFi 인증</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans KR', sans-serif, Arial;
        }
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f5f5f5;
            color: #333;
            padding: 20px;
        }
        .container {
            width: 100%;
            max-width: 500px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
            text-align: center;
        }
        .hospital-logo {
            width: 80px;
            height: 80px;
            background-color: #3498db;
            color: white;
            border-radius: 50%;
            line-height: 80px;
            font-size: 1.8rem;
            margin: 0 auto 20px;
        }
        h1 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        input[type="text"], input[type="tel"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        .btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s;
            width: 100%;
            margin: 5px 0;
        }
        .btn-secondary {
            background-color: #95a5a6;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        .message {
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .message-success {
            background-color: #d4edda;
            color: #155724;
        }
        .message-error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .timer {
            font-size: 0.9rem;
            color: #777;
            margin-top: 10px;
        }
        footer {
            margin-top: 30px;
            color: #777;
            font-size: 0.8rem;
        }
    </style>
    <script>
        function validatePhone(input) {
            // 숫자와 하이픈만 허용하는 정규식
            let value = input.value.replace(/[^0-9-]/g, '');
            input.value = value;
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="hospital-logo">H</div>
        <h1>WiFi 인증</h1>
        
        
<p style="margin-bottom: 20px;">
    WiFi를 이용하시려면 휴대폰 인증이 필요합니다.<br>
    전화번호를 입력하시면 인증번호가 발송됩니다.
</p>

<form id="phone-form">
    <div class="form-group">
        <label for="phone">전화번호</label>
        <input type="tel" id="phone" name="phone_number" placeholder="010-1234-5678" required 
               oninput="validatePhone(this)" maxlength="13">
    </div>
    
    <div id="error-message" class="message message-error" style="display: none;"></div>
    
    <button type="submit" class="btn">인증번호 받기</button>
    <a href="/" class="btn btn-secondary">취소</a>
</form>

        
        <footer>
            © 2025 병원 WiFi 인증 서비스
        </footer>
    </div>
    
    
<script>
    document.getElementById('phone-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const phone = document.getElementById('phone').value;
        const errorMsg = document.getElementById('error-message');
        
        if (!phone || phone.length < 10) {
            errorMsg.textContent = '올바른 전화번호를 입력해주세요.';
            errorMsg.style.display = 'block';
            return;
        }
        
        try {
            const response = await fetch('/api/auth/send-code', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ phone_number: phone }),
            });
            
            const data = await response.json();
            
            if (response.ok) {
                // 인증번호 확인 페이지로 이동
                window.location.href = `/verify?phone_number=${encodeURIComponent(phone)}`;
            } else {
                errorMsg.textContent = data.detail || '인증번호 발송에 실패했습니다. 다시 시도해주세요.';
                errorMsg.style.display = 'block';
            }
        } catch (error) {
            errorMsg.textContent = '오류가 발생했습니다. 다시 시도해주세요.';
            errorMsg.style.display = 'block';
            console.error('Error:', error);
        }
    });
</script>

</body>
</html>
2025-07-22 13:04:32,698 - INFO - Request: POST http://127.0.0.1:8000/api/auth/send-code
2025-07-22 13:04:32,699 - INFO - [요청 본문] {"phone_number":"010-4928-4767"}
2025-07-22 13:04:35,525 - INFO - Request: POST http://127.0.0.1:8000/api/auth/send-code
2025-07-22 13:04:35,525 - INFO - [요청 본문] {"phone_number":"010-4928-4767"}
2025-07-22 13:04:40,915 - INFO - Request: GET http://127.0.0.1:8000/api/auth/send-code
2025-07-22 13:04:40,916 - INFO - Response: 405
2025-07-22 13:04:40,954 - INFO - [응답 본문] {"detail":"Method Not Allowed"}
2025-07-22 13:07:18,946 - INFO - WiFi 캡티브 포털 서비스 종료
2025-07-22 13:07:19,396 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:07:19,404 - INFO - 네트워크 제어 타입: iptables
2025-07-22 13:07:19,433 - INFO - 네트워크 인터페이스: wlan0
2025-07-22 13:07:19,461 - INFO - 캡티브 포털 IP: 192.168.1.1:8000
2025-07-22 13:07:19,498 - INFO - 기본 관리자 계정 확인 완료
2025-07-22 13:07:20,666 - INFO - WiFi 캡티브 포털 서비스 종료
2025-07-22 13:19:06,489 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:23:00,665 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:23:00,689 - INFO - 네트워크 제어 타입: iptables
2025-07-22 13:23:00,699 - INFO - 네트워크 인터페이스: wlan0
2025-07-22 13:23:00,715 - INFO - 캡티브 포털 IP: 192.168.1.1:8000
2025-07-22 13:23:00,730 - INFO - 기본 관리자 계정 확인 완료
2025-07-22 13:24:06,170 - INFO - WiFi 캡티브 포털 서비스 종료
2025-07-22 13:24:06,565 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:24:06,591 - INFO - 네트워크 제어 타입: iptables
2025-07-22 13:24:06,600 - INFO - 네트워크 인터페이스: wlan0
2025-07-22 13:24:06,615 - INFO - 캡티브 포털 IP: 192.168.1.1:8000
2025-07-22 13:24:06,632 - INFO - 기본 관리자 계정 확인 완료
2025-07-22 13:24:06,645 - INFO - WiFi 캡티브 포털 서비스 종료
2025-07-22 13:24:07,035 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:24:07,050 - INFO - 네트워크 제어 타입: iptables
2025-07-22 13:24:07,061 - INFO - 네트워크 인터페이스: wlan0
2025-07-22 13:24:07,071 - INFO - 캡티브 포털 IP: 192.168.1.1:8000
2025-07-22 13:24:07,086 - INFO - 기본 관리자 계정 확인 완료
2025-07-22 13:24:44,952 - INFO - WiFi 캡티브 포털 서비스 종료
2025-07-22 13:24:45,341 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:24:45,355 - INFO - 네트워크 제어 타입: iptables
2025-07-22 13:24:45,370 - INFO - 네트워크 인터페이스: wlan0
2025-07-22 13:24:45,382 - INFO - 캡티브 포털 IP: 192.168.1.1:8000
2025-07-22 13:24:45,396 - INFO - 기본 관리자 계정 확인 완료
2025-07-22 13:24:45,412 - INFO - WiFi 캡티브 포털 서비스 종료
2025-07-22 13:24:45,808 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:24:45,821 - INFO - 네트워크 제어 타입: iptables
2025-07-22 13:24:45,830 - INFO - 네트워크 인터페이스: wlan0
2025-07-22 13:24:45,846 - INFO - 캡티브 포털 IP: 192.168.1.1:8000
2025-07-22 13:24:45,856 - INFO - 기본 관리자 계정 확인 완료
2025-07-22 13:25:33,085 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:25:33,102 - INFO - 네트워크 제어 타입: iptables
2025-07-22 13:25:33,113 - INFO - 네트워크 인터페이스: wlan0
2025-07-22 13:25:33,123 - INFO - 캡티브 포털 IP: 192.168.1.1:8000
2025-07-22 13:25:33,135 - INFO - 기본 관리자 계정 확인 완료
2025-07-22 13:26:11,010 - INFO - WiFi 캡티브 포털 서비스 종료
2025-07-22 13:26:11,428 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:26:11,441 - INFO - 네트워크 제어 타입: iptables
2025-07-22 13:26:11,449 - INFO - 네트워크 인터페이스: wlan0
2025-07-22 13:26:11,465 - INFO - 캡티브 포털 IP: 192.168.1.1:8000
2025-07-22 13:26:11,479 - INFO - 기본 관리자 계정 확인 완료
2025-07-22 13:26:11,489 - INFO - WiFi 캡티브 포털 서비스 종료
2025-07-22 13:26:11,845 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:26:11,859 - INFO - 네트워크 제어 타입: iptables
2025-07-22 13:26:11,866 - INFO - 네트워크 인터페이스: wlan0
2025-07-22 13:26:11,880 - INFO - 캡티브 포털 IP: 192.168.1.1:8000
2025-07-22 13:26:11,889 - INFO - 기본 관리자 계정 확인 완료
2025-07-22 13:26:13,195 - INFO - WiFi 캡티브 포털 서비스 종료
2025-07-22 13:30:32,669 - INFO - WiFi 캡티브 포털 서비스 종료
2025-07-22 13:30:33,024 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:30:33,036 - INFO - 네트워크 제어 타입: iptables
2025-07-22 13:30:33,045 - INFO - 네트워크 인터페이스: wlan0
2025-07-22 13:30:33,053 - INFO - 캡티브 포털 IP: 192.168.1.1:8000
2025-07-22 13:30:33,061 - INFO - 기본 관리자 계정 확인 완료
2025-07-22 13:30:37,762 - INFO - WiFi 캡티브 포털 서비스 종료
2025-07-22 13:30:38,193 - INFO - WiFi 캡티브 포털 서비스 시작
2025-07-22 13:30:38,210 - INFO - 네트워크 제어 타입: iptables
2025-07-22 13:30:38,214 - INFO - 네트워크 인터페이스: wlan0
2025-07-22 13:30:38,229 - INFO - 캡티브 포털 IP: 192.168.1.1:8000
2025-07-22 13:30:38,242 - INFO - 기본 관리자 계정 확인 완료
